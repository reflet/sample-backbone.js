<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>Backbone.js学習 [Collection]</title>
</head>
<body>
    <h1>Collection</h1>
    <p>CollectionでAjax通信して動的にデータを取得する</p>

    <script src="https://cdn.jsdelivr.net/npm/underscore@1.9.1/underscore.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/jquery/jquery@3.4.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/backbone@1.4.0/backbone.min.js"></script>
    <script>
      // Model
      const Person = Backbone.Model.extend({
        defaults: {
          country: '日本',
          prefecture: '東京',
          name: '',
          age: null,
        }
      });

      // Collection
      const Users = Backbone.Collection.extend({
        model: Person,
        url: '/api/users.json',
        parse: function(response){
          console.log(response);
          return response;
        }
      });
      const users = new Users();
      users.fetch().done(function(users){
        $.each(users, function(index, user){
          console.log(index, user);
        });
      });
    </script>
</body>
</html>
